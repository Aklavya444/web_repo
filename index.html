<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Varnika Jewelers - Premium Gold & Silver Jewelry</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
        }

        .font-playfair {
            font-family: 'Playfair Display', serif;
        }

        /* Theme Variables */
        :root {
            --primary-gold: #D4AF37;
            --primary-silver: #C0C0C0;
            --bg-light: #FEFEFE;
            --bg-dark: #1a1a1a;
            --text-light: #1a1a1a;
            --text-dark: #ffffff;
            --card-light: #ffffff;
            --card-dark: #2d2d2d;
            --border-light: #e5e7eb;
            --border-dark: #4b5563;
        }

        [data-theme="dark"] {
            --bg-color: var(--bg-dark);
            --text-color: var(--text-dark);
            --card-color: var(--card-dark);
            --border-color: var(--border-dark);
        }

        [data-theme="light"] {
            --bg-color: var(--bg-light);
            --text-color: var(--text-light);
            --card-color: var(--card-light);
            --border-color: var(--border-light);
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        /* Enhanced contrast for all text elements */
        .text-contrast {
            color: var(--text-color) !important;
        }

        .bg-contrast {
            background-color: var(--card-color);
            border-color: var(--border-color);
        }

        /* Sparkle Cursor Trail */
        .sparkle {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, #D4AF37, #FFD700);
            border-radius: 50%;
            animation: sparkleFloat 2s ease-out forwards;
        }

        @keyframes sparkleFloat {
            0% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: scale(0) rotate(360deg);
            }
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in-left {
            animation: slideInLeft 0.8s ease-out;
        }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .bounce-in {
            animation: bounceIn 0.8s ease-out;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Product Card Hover Effects */
        .product-card {
            transition: all 0.3s ease;
            background-color: var(--card-color);
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(212, 175, 55, 0.2);
        }

        /* Image Zoom Effect */
        .zoom-container {
            overflow: hidden;
            position: relative;
        }

        .zoom-image {
            transition: transform 0.3s ease;
            cursor: zoom-in;
        }

        .zoom-image:hover {
            transform: scale(1.2);
        }

        /* Navigation Styles */
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #D4AF37, #FFD700);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        /* Button Styles */
        .btn-gold {
            background: linear-gradient(135deg, #D4AF37, #FFD700);
            transition: all 0.3s ease;
        }

        .btn-gold:hover {
            background: linear-gradient(135deg, #FFD700, #D4AF37);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.3);
        }

        .btn-silver {
            background: linear-gradient(135deg, #C0C0C0, #E5E5E5);
            color: #333;
            transition: all 0.3s ease;
        }

        .btn-silver:hover {
            background: linear-gradient(135deg, #E5E5E5, #C0C0C0);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(192, 192, 192, 0.3);
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(212, 175, 55, 0.3);
            border-radius: 50%;
            border-top-color: #D4AF37;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Modal Styles */
        .modal {
            backdrop-filter: blur(10px);
            background: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: var(--card-color);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Cart Badge */
        .cart-badge {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Rate Display */
        .rate-display {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(255, 215, 0, 0.1));
            border: 1px solid rgba(212, 175, 55, 0.3);
            animation: rateUpdate 0.5s ease-out;
        }

        @keyframes rateUpdate {
            0% { background-color: rgba(212, 175, 55, 0.3); }
            100% { background-color: rgba(212, 175, 55, 0.1); }
        }

        /* Page Transitions */
        .page {
            transition: all 0.3s ease;
        }

        .page.hidden {
            display: none !important;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
        }

        /* Hide scrollbar but keep functionality */
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        /* Category buttons active state */
        .category-btn-active {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
        }

        /* Subcategory scroll */
        .subcategory-scroll {
            scrollbar-width: thin;
            scrollbar-color: #D4AF37 transparent;
        }

        .subcategory-scroll::-webkit-scrollbar {
            height: 4px;
        }

        .subcategory-scroll::-webkit-scrollbar-track {
            background: transparent;
        }

        .subcategory-scroll::-webkit-scrollbar-thumb {
            background: #D4AF37;
            border-radius: 2px;
        }
    </style>
</head>
<body data-theme="light" class="transition-all duration-300">
    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/90 dark:bg-gray-900/90 backdrop-blur-md border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-4">
                    <div class="font-playfair text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-600 to-yellow-400">
                        Varnika Jewelers
                    </div>
                </div>

                <!-- Search Bar -->
                <div class="hidden md:flex flex-1 max-w-lg mx-8">
                    <div class="relative w-full">
                        <input type="text" id="searchInput" placeholder="Search jewelry..." 
                               class="w-full px-4 py-2 pl-10 pr-4 rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                </div>

                <!-- Navigation Links -->
                <div class="hidden md:flex items-center space-x-6">
                    <a href="#" class="nav-link text-gray-700 dark:text-gray-300 hover:text-yellow-600" onclick="showPage('home')">Home</a>
                    <a href="#" class="nav-link text-gray-700 dark:text-gray-300 hover:text-yellow-600" onclick="showPage('products')">Products</a>
                    <a href="#" class="nav-link text-gray-700 dark:text-gray-300 hover:text-yellow-600" onclick="showPage('admin')">Admin</a>
                    
                    <!-- Theme Toggle -->
                    <button id="themeToggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block"></i>
                    </button>

                    <!-- Instagram -->
                    <a href="https://instagram.com" target="_blank" class="text-pink-500 hover:text-pink-600 transition-colors">
                        <i class="fab fa-instagram text-xl"></i>
                    </a>

                    <!-- Wishlist -->
                    <button onclick="showWishlist()" class="relative p-2 text-red-500 hover:text-red-600 transition-colors">
                        <i class="fas fa-heart text-xl"></i>
                        <span id="wishlistCount" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span>
                    </button>

                    <!-- Cart -->
                    <button onclick="showCart()" class="relative p-2 text-yellow-600 hover:text-yellow-700 transition-colors">
                        <i class="fas fa-shopping-cart text-xl"></i>
                        <span id="cartCount" class="cart-badge absolute -top-1 -right-1 bg-yellow-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span>
                    </button>
                </div>

                <!-- Mobile Menu Button -->
                <button id="mobileMenuBtn" class="md:hidden p-2">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden md:hidden bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700">
            <div class="px-4 py-2 space-y-2">
                <a href="#" class="block py-2 text-gray-700 dark:text-gray-300" onclick="showPage('home')">Home</a>
                <a href="#" class="block py-2 text-gray-700 dark:text-gray-300" onclick="showPage('products')">Products</a>
                <a href="#" class="block py-2 text-gray-700 dark:text-gray-300" onclick="showPage('admin')">Admin</a>
            </div>
        </div>
    </nav>

    <!-- Rate Display - Sticky -->
    <div class="sticky top-16 z-40 rate-display p-2 md:p-3 text-center bg-white/95 dark:bg-gray-900/95 backdrop-blur-md border-b border-gray-200 dark:border-gray-700">
        <!-- Desktop Rate Display -->
        <div class="hidden md:block">
            <div class="max-w-4xl mx-auto flex justify-center items-center space-x-8">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-coins text-yellow-500"></i>
                    <span class="font-semibold text-contrast">Gold Rate:</span>
                    <span id="goldRate" class="font-bold text-yellow-600">â‚¹0/g</span>
                    <div id="goldLoading" class="loading hidden"></div>
                </div>
                <div class="flex items-center space-x-2">
                    <i class="fas fa-gem text-gray-400"></i>
                    <span class="font-semibold text-contrast">Silver Rate:</span>
                    <span id="silverRate" class="font-bold text-gray-500">â‚¹0/g</span>
                    <div id="silverLoading" class="loading hidden"></div>
                </div>
                <div class="text-sm text-gray-500">
                    Last updated: <span id="lastUpdated">--</span>
                </div>
            </div>
        </div>
        
        <!-- Mobile Rate Display -->
        <div class="md:hidden">
            <div class="flex justify-center items-center space-x-4 text-sm">
                <div class="flex items-center space-x-1">
                    <i class="fas fa-coins text-yellow-500 text-xs"></i>
                    <span class="font-semibold text-contrast">Gold:</span>
                    <span id="goldRateMobile" class="font-bold text-yellow-600">â‚¹0/g</span>
                </div>
                <div class="flex items-center space-x-1">
                    <i class="fas fa-gem text-gray-400 text-xs"></i>
                    <span class="font-semibold text-contrast">Silver:</span>
                    <span id="silverRateMobile" class="font-bold text-gray-500">â‚¹0/g</span>
                </div>
            </div>
            <div class="text-xs text-gray-500 mt-1">
                Updated: <span id="lastUpdatedMobile">--</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main id="mainContent" class="min-h-screen">
        <!-- Home Page -->
        <div id="homePage" class="page">
            <!-- Hero Section -->
            <section class="relative h-96 bg-gradient-to-r from-yellow-50 to-yellow-100 dark:from-gray-800 dark:to-gray-900 flex items-center justify-center">
                <div class="text-center fade-in">
                    <h1 class="font-playfair text-5xl md:text-6xl font-bold text-gray-800 dark:text-white mb-4">
                        Exquisite Jewelry Collection
                    </h1>
                    <p class="text-xl text-gray-600 dark:text-gray-300 mb-8">
                        Discover premium gold and silver jewelry crafted with perfection
                    </p>
                    <button onclick="showPage('products')" class="btn-gold text-white px-8 py-3 rounded-full font-semibold text-lg">
                        Explore Collection
                    </button>
                </div>
            </section>

            <!-- Categories Section -->
            <section class="py-16 px-4">
                <div class="max-w-6xl mx-auto">
                    <h2 class="font-playfair text-4xl font-bold text-center mb-12">Our Collections</h2>
                    <div class="grid md:grid-cols-2 gap-8">
                        <!-- Gold Category -->
                        <div class="product-card rounded-2xl p-8 text-center cursor-pointer" onclick="showCategory('gold')">
                            <div class="text-6xl mb-4">ðŸ¥‡</div>
                            <h3 class="font-playfair text-2xl font-bold mb-4 text-yellow-600">Gold Collection</h3>
                            <p class="text-gray-600 dark:text-gray-400 mb-6">Premium gold jewelry with intricate designs</p>
                            <div class="btn-gold text-white px-6 py-2 rounded-full inline-block">
                                View Collection
                            </div>
                        </div>

                        <!-- Silver Category -->
                        <div class="product-card rounded-2xl p-8 text-center cursor-pointer" onclick="showCategory('silver')">
                            <div class="text-6xl mb-4">ðŸ¥ˆ</div>
                            <h3 class="font-playfair text-2xl font-bold mb-4 text-gray-500">Silver Collection</h3>
                            <p class="text-gray-600 dark:text-gray-400 mb-6">Elegant silver jewelry for every occasion</p>
                            <div class="btn-silver text-gray-800 px-6 py-2 rounded-full inline-block">
                                View Collection
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Products Page -->
        <div id="productsPage" class="page hidden">
            <div class="max-w-7xl mx-auto px-4 py-8">
                <!-- Category Selection -->
                <div class="flex justify-center mb-8">
                    <div class="bg-white dark:bg-gray-800 rounded-full p-2 shadow-lg">
                        <button id="goldCategoryBtn" onclick="showCategory('gold')" class="px-6 py-2 rounded-full btn-gold text-white category-btn-active">
                            Gold
                        </button>
                        <button id="silverCategoryBtn" onclick="showCategory('silver')" class="px-6 py-2 rounded-full text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700">
                            Silver
                        </button>
                    </div>
                </div>

                <!-- Subcategory Navigation -->
                <div id="subcategoryNav" class="mb-8 overflow-x-auto subcategory-scroll">
                    <div class="flex space-x-4 min-w-max px-4" id="subcategoryContainer">
                        <!-- Subcategories will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Products Grid -->
                <div id="productsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- Products will be populated by JavaScript -->
                </div>

                <!-- Loading Indicator -->
                <div id="productsLoading" class="hidden text-center py-8">
                    <div class="loading mx-auto mb-4"></div>
                    <p class="text-gray-500">Loading products...</p>
                </div>
            </div>
        </div>

        <!-- Admin Page -->
        <div id="adminPage" class="page hidden">
            <div class="max-w-4xl mx-auto px-4 py-8">
                <!-- Admin Login -->
                <div id="adminLogin" class="bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg">
                    <h2 class="font-playfair text-3xl font-bold text-center mb-8">Admin Login</h2>
                    <div class="max-w-md mx-auto space-y-4">
                        <input type="text" id="adminUsername" placeholder="Username" 
                               class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        <input type="password" id="adminPassword" placeholder="Password" 
                               class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-yellow-500">
                        <button onclick="adminLogin()" class="w-full btn-gold text-white py-3 rounded-lg font-semibold">
                            Login
                        </button>
                    </div>
                </div>

                <!-- Admin Panel -->
                <div id="adminPanel" class="hidden">
                    <h2 class="font-playfair text-3xl font-bold text-center mb-8 text-contrast">Rate Management Dashboard</h2>
                    
                    <!-- Single Unified Rate Update Panel -->
                    <div class="max-w-2xl mx-auto">
                        <div class="bg-contrast rounded-2xl p-8 shadow-xl border">
                            <div class="text-center mb-8">
                                <div class="inline-flex items-center space-x-3 bg-gradient-to-r from-yellow-100 to-gray-100 dark:from-yellow-900/30 dark:to-gray-800/30 px-6 py-3 rounded-full">
                                    <i class="fas fa-coins text-yellow-600 text-xl"></i>
                                    <span class="font-playfair text-xl font-bold text-contrast">Update Metal Rates</span>
                                    <i class="fas fa-gem text-gray-500 text-xl"></i>
                                </div>
                            </div>
                            
                            <div class="space-y-6">
                                <!-- Current Rates Display -->
                                <div class="bg-gradient-to-r from-yellow-50 to-gray-50 dark:from-yellow-900/20 dark:to-gray-800/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800">
                                    <h4 class="font-semibold text-contrast mb-3 text-center">Current Rates</h4>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div class="text-center">
                                            <div class="flex items-center justify-center space-x-2 mb-1">
                                                <i class="fas fa-coins text-yellow-600"></i>
                                                <span class="font-semibold text-contrast">Gold</span>
                                            </div>
                                            <div class="text-2xl font-bold text-yellow-600" id="currentGoldDisplay">â‚¹0/g</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="flex items-center justify-center space-x-2 mb-1">
                                                <i class="fas fa-gem text-gray-500"></i>
                                                <span class="font-semibold text-contrast">Silver</span>
                                            </div>
                                            <div class="text-2xl font-bold text-gray-600" id="currentSilverDisplay">â‚¹0/g</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Rate Input Fields -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="space-y-3">
                                        <label class="flex items-center space-x-2 font-semibold text-contrast">
                                            <i class="fas fa-coins text-yellow-600"></i>
                                            <span>New Gold Rate (â‚¹/gram)</span>
                                        </label>
                                        <input type="number" id="adminGoldRate" placeholder="Enter gold rate" 
                                               class="w-full px-4 py-4 rounded-xl border-2 bg-contrast text-contrast border-yellow-300 dark:border-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all text-lg font-semibold">
                                    </div>
                                    
                                    <div class="space-y-3">
                                        <label class="flex items-center space-x-2 font-semibold text-contrast">
                                            <i class="fas fa-gem text-gray-500"></i>
                                            <span>New Silver Rate (â‚¹/gram)</span>
                                        </label>
                                        <input type="number" id="adminSilverRate" placeholder="Enter silver rate" 
                                               class="w-full px-4 py-4 rounded-xl border-2 bg-contrast text-contrast border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-500 transition-all text-lg font-semibold">
                                    </div>
                                </div>

                                <!-- Single Update Button -->
                                <div class="pt-4">
                                    <button onclick="updateBothRates()" class="w-full bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white py-4 rounded-xl font-bold text-lg transition-all transform hover:scale-105 hover:shadow-lg flex items-center justify-center space-x-3">
                                        <i class="fas fa-sync-alt"></i>
                                        <span>Update Both Rates</span>
                                        <i class="fas fa-check-circle"></i>
                                    </button>
                                </div>

                                <!-- Quick Actions -->
                                <div class="flex justify-center space-x-4 pt-2">
                                    <button onclick="resetRates()" class="px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-semibold transition-colors">
                                        <i class="fas fa-undo mr-2"></i>Reset
                                    </button>
                                    <button onclick="refreshCurrentRates()" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors">
                                        <i class="fas fa-refresh mr-2"></i>Refresh
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="adminStatus" class="mt-6 p-4 rounded-xl text-center hidden max-w-2xl mx-auto"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Product Modal -->
    <div id="productModal" class="modal fixed inset-0 z-50 hidden flex items-center justify-center p-4">
        <div class="modal-content max-w-4xl w-full max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 id="modalTitle" class="font-playfair text-2xl font-bold"></h2>
                    <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 text-2xl">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="zoom-container rounded-lg overflow-hidden">
                        <img id="modalImage" class="zoom-image w-full h-80 object-cover" src="" alt="">
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-center space-x-2">
                            <span class="font-semibold">Design ID:</span>
                            <span id="modalDesignId" class="text-yellow-600 font-mono"></span>
                        </div>
                        
                        <div class="flex items-center space-x-2">
                            <span class="font-semibold">Weight:</span>
                            <span id="modalWeight"></span>
                        </div>
                        
                        <div class="flex items-center space-x-2">
                            <span class="font-semibold">Metal Rate:</span>
                            <span id="modalRate"></span>
                        </div>
                        
                        <div class="flex items-center space-x-2">
                            <span class="font-semibold">Making Charges:</span>
                            <span id="modalMaking"></span>
                        </div>
                        
                        <div class="flex items-center space-x-2 text-xl font-bold">
                            <span>Total Amount:</span>
                            <span id="modalTotal" class="text-green-600"></span>
                        </div>
                        
                        <div class="flex space-x-4 pt-4">
                            <button onclick="addToCart(currentProduct)" class="flex-1 btn-gold text-white py-3 rounded-lg font-semibold">
                                <i class="fas fa-shopping-cart mr-2"></i>Add to Cart
                            </button>
                            <button onclick="toggleWishlist(currentProduct)" class="flex-1 bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-semibold transition-colors">
                                <i class="fas fa-heart mr-2"></i>Add to Wishlist
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal fixed inset-0 z-50 hidden flex items-center justify-center p-4">
        <div class="modal-content max-w-4xl w-full max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="font-playfair text-2xl font-bold">Shopping Cart</h2>
                    <button onclick="closeCart()" class="text-gray-500 hover:text-gray-700 text-2xl">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div id="cartItems" class="space-y-4 mb-6">
                    <!-- Cart items will be populated by JavaScript -->
                </div>
                
                <div class="border-t pt-4">
                    <div class="flex justify-between items-center text-xl font-bold mb-4">
                        <span>Total Amount:</span>
                        <span id="cartTotal" class="text-green-600">â‚¹0</span>
                    </div>
                    <button onclick="checkout()" class="w-full btn-gold text-white py-3 rounded-lg font-semibold text-lg">
                        Proceed to Checkout
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Wishlist Modal -->
    <div id="wishlistModal" class="modal fixed inset-0 z-50 hidden flex items-center justify-center p-4">
        <div class="modal-content max-w-4xl w-full max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="font-playfair text-2xl font-bold">Wishlist</h2>
                    <button onclick="closeWishlist()" class="text-gray-500 hover:text-gray-700 text-2xl">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div id="wishlistItems" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Wishlist items will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let currentRates = { gold: 6800, silver: 85 }; // Default rates - updated to realistic 2024 values
        let currentCategory = 'gold';
        let currentSubcategory = 'chains';
        let currentProduct = null;
        let cart = JSON.parse(localStorage.getItem('varnika_cart')) || [];
        let wishlist = JSON.parse(localStorage.getItem('varnika_wishlist')) || [];
        let isAdminLoggedIn = false;

        // GitHub Configuration
        const owner = 'Aklavya444';
        const repo = 'web_repo';
        const path = 'rate_record.txt';
        const branch = 'main';
        // Note: For production, use environment variables or secure token management
        const token = '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';
        let fileSha = null;

        // Subcategories
        const subcategories = [
            'chains', 'bracelets', 'rings', 'earrings', 'necklaces', 'pendants', 
            'bangles', 'anklets', 'nose-pins', 'toe-rings', 'armlets', 'waist-chains',
            'hair-accessories', 'brooches', 'cufflinks'
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing Varnika Jewelers website...');
            initializeApp();
            setupEventListeners();
            fetchRates();
            setInterval(refreshWebsiteData, 3000); // Refresh entire website data every 3 seconds
        });

        function initializeApp() {
            updateCartCount();
            updateWishlistCount();
            showPage('home');
            
            // Load saved theme
            const savedTheme = localStorage.getItem('varnika_theme') || 'light';
            document.body.setAttribute('data-theme', savedTheme);
        }

        function setupEventListeners() {
            // Theme toggle
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            
            // Mobile menu
            document.getElementById('mobileMenuBtn').addEventListener('click', toggleMobileMenu);
            
            // Search
            document.getElementById('searchInput').addEventListener('input', handleSearch);
            
            // Sparkle cursor trail
            document.addEventListener('mousemove', createSparkle);
            
            // Admin form enter key
            document.getElementById('adminPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') adminLogin();
            });
            
            document.getElementById('adminUsername').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') document.getElementById('adminPassword').focus();
            });
        }

        // Sparkle Cursor Trail
        function createSparkle(e) {
            if (Math.random() > 0.7) { // Only create sparkles 30% of the time
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = (e.clientX - 4) + 'px';
                sparkle.style.top = (e.clientY - 4) + 'px';
                document.body.appendChild(sparkle);
                
                setTimeout(() => {
                    if (sparkle.parentNode) {
                        sparkle.remove();
                    }
                }, 2000);
            }
        }

        // Theme Toggle
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('varnika_theme', newTheme);
        }

        // Mobile Menu
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }

        // Page Navigation
        function showPage(page) {
            console.log('Showing page:', page);
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            const targetPage = document.getElementById(page + 'Page');
            if (targetPage) {
                targetPage.classList.remove('hidden');
                
                if (page === 'products') {
                    generateSubcategoryNav();
                    generateProducts();
                }
            }
        }

        // Category Management
        function showCategory(category) {
            console.log('Showing category:', category);
            currentCategory = category;
            currentSubcategory = 'chains';
            
            // Update category buttons
            const goldBtn = document.getElementById('goldCategoryBtn');
            const silverBtn = document.getElementById('silverCategoryBtn');
            
            if (category === 'gold') {
                goldBtn.className = 'px-6 py-2 rounded-full btn-gold text-white category-btn-active';
                silverBtn.className = 'px-6 py-2 rounded-full text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700';
            } else {
                silverBtn.className = 'px-6 py-2 rounded-full btn-silver text-gray-800 category-btn-active';
                goldBtn.className = 'px-6 py-2 rounded-full text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700';
            }
            
            generateSubcategoryNav();
            generateProducts();
            showPage('products');
        }

        function generateSubcategoryNav() {
            const container = document.getElementById('subcategoryContainer');
            if (!container) return;
            
            container.innerHTML = '';
            
            subcategories.forEach(sub => {
                const button = document.createElement('button');
                const isActive = sub === currentSubcategory;
                
                if (isActive) {
                    button.className = currentCategory === 'gold' 
                        ? 'px-4 py-2 rounded-full btn-gold text-white whitespace-nowrap'
                        : 'px-4 py-2 rounded-full btn-silver text-gray-800 whitespace-nowrap';
                } else {
                    button.className = 'px-4 py-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 whitespace-nowrap transition-colors';
                }
                
                button.textContent = sub.charAt(0).toUpperCase() + sub.slice(1).replace('-', ' ');
                button.onclick = () => showSubcategory(sub);
                container.appendChild(button);
            });
        }

        function showSubcategory(subcategory) {
            console.log('Showing subcategory:', subcategory);
            currentSubcategory = subcategory;
            generateSubcategoryNav();
            generateProducts();
        }

        // Product Generation
        function generateProducts() {
            console.log('Generating products for:', currentCategory, currentSubcategory);
            const grid = document.getElementById('productsGrid');
            const loading = document.getElementById('productsLoading');
            
            if (!grid) return;
            
            // Show loading
            loading.classList.remove('hidden');
            grid.innerHTML = '';
            
            // Simulate loading delay for better UX
            setTimeout(() => {
                for (let i = 1; i <= 20; i++) {
                    const product = createProduct(i);
                    const productCard = createProductCard(product);
                    grid.appendChild(productCard);
                }
                loading.classList.add('hidden');
            }, 300);
        }

        function createProduct(index) {
            const weight = (Math.random() * 8 + 2).toFixed(1); // 2-10 grams
            const makingCharges = Math.floor(Math.random() * 400 + 300); // 300-700
            const designId = `${currentSubcategory.charAt(0)}${currentCategory.charAt(0)}${index}`;
            
            return {
                id: `${currentCategory}-${currentSubcategory}-${index}`,
                name: `${currentCategory.charAt(0).toUpperCase() + currentCategory.slice(1)} ${currentSubcategory.charAt(0).toUpperCase() + currentSubcategory.slice(1).replace('-', ' ')} Design ${index}`,
                category: currentCategory,
                subcategory: currentSubcategory,
                weight: parseFloat(weight),
                makingCharges: makingCharges,
                designId: designId,
                image: generateProductImage(currentCategory, currentSubcategory, index)
            };
        }

        function generateProductImage(category, subcategory, index) {
            const color = category === 'gold' ? '#D4AF37' : '#C0C0C0';
            const accent = category === 'gold' ? '#FFD700' : '#E5E5E5';
            const darkColor = category === 'gold' ? '#B8860B' : '#A0A0A0';
            
            return `data:image/svg+xml,${encodeURIComponent(`
                <svg width="300" height="300" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="grad${index}" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:${color};stop-opacity:1" />
                            <stop offset="50%" style="stop-color:${accent};stop-opacity:1" />
                            <stop offset="100%" style="stop-color:${darkColor};stop-opacity:1" />
                        </linearGradient>
                        <filter id="shadow${index}">
                            <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="rgba(0,0,0,0.3)"/>
                        </filter>
                    </defs>
                    <rect width="300" height="300" fill="#f8f9fa"/>
                    <g filter="url(#shadow${index})">
                        ${getSubcategoryShape(subcategory, `url(#grad${index})`, accent, index)}
                    </g>
                    <text x="150" y="280" text-anchor="middle" font-family="serif" font-size="12" fill="#666" font-weight="bold">
                        ${subcategory.charAt(0).toUpperCase() + subcategory.slice(1).replace('-', ' ')} ${index}
                    </text>
                </svg>
            `)}`;
        }

        function getSubcategoryShape(subcategory, gradient, accent, index) {
            const variation = index % 3; // Add some variation
            
            switch(subcategory) {
                case 'chains':
                    return `
                        <path d="M50 150 Q100 ${100 + variation * 10} 150 150 Q200 ${200 - variation * 10} 250 150" stroke="${gradient}" stroke-width="10" fill="none"/>
                        <circle cx="${75 + variation * 5}" cy="${125 + variation * 5}" r="12" fill="${gradient}"/>
                        <circle cx="150" cy="150" r="12" fill="${gradient}"/>
                        <circle cx="${225 - variation * 5}" cy="${175 - variation * 5}" r="12" fill="${gradient}"/>
                    `;
                case 'rings':
                    return `
                        <circle cx="150" cy="150" r="${55 + variation * 5}" stroke="${gradient}" stroke-width="15" fill="none"/>
                        <circle cx="150" cy="${115 + variation * 5}" r="${6 + variation * 2}" fill="${accent}"/>
                        <path d="M${130 + variation * 5} ${130 + variation * 3} L${170 - variation * 5} ${130 + variation * 3}" stroke="${gradient}" stroke-width="3"/>
                    `;
                case 'earrings':
                    return `
                        <circle cx="${115 + variation * 5}" cy="120" r="${20 + variation * 3}" fill="${gradient}"/>
                        <circle cx="${185 - variation * 5}" cy="120" r="${20 + variation * 3}" fill="${gradient}"/>
                        <path d="M${115 + variation * 5} 140 L${115 + variation * 5} ${170 + variation * 5}" stroke="${gradient}" stroke-width="6"/>
                        <path d="M${185 - variation * 5} 140 L${185 - variation * 5} ${170 + variation * 5}" stroke="${gradient}" stroke-width="6"/>
                        <circle cx="${115 + variation * 5}" cy="${175 + variation * 5}" r="8" fill="${accent}"/>
                        <circle cx="${185 - variation * 5}" cy="${175 + variation * 5}" r="8" fill="${accent}"/>
                    `;
                case 'bracelets':
                    return `
                        <ellipse cx="150" cy="150" rx="${75 + variation * 5}" ry="${35 + variation * 3}" stroke="${gradient}" stroke-width="12" fill="none"/>
                        <circle cx="${100 + variation * 10}" cy="${130 + variation * 5}" r="8" fill="${accent}"/>
                        <circle cx="150" cy="${120 + variation * 3}" r="8" fill="${accent}"/>
                        <circle cx="${200 - variation * 10}" cy="${130 + variation * 5}" r="8" fill="${accent}"/>
                        <circle cx="${120 + variation * 5}" cy="${170 - variation * 3}" r="6" fill="${accent}"/>
                        <circle cx="${180 - variation * 5}" cy="${170 - variation * 3}" r="6" fill="${accent}"/>
                    `;
                case 'necklaces':
                    return `
                        <path d="M${80 + variation * 5} 100 Q150 ${170 + variation * 10} ${220 - variation * 5} 100" stroke="${gradient}" stroke-width="8" fill="none"/>
                        <circle cx="150" cy="${155 + variation * 5}" r="${18 + variation * 2}" fill="${gradient}"/>
                        <circle cx="150" cy="${155 + variation * 5}" r="${10 + variation}" fill="${accent}"/>
                        <path d="M${100 + variation * 10} ${120 + variation * 5} Q150 ${140 + variation * 5} ${200 - variation * 10} ${120 + variation * 5}" stroke="${gradient}" stroke-width="4" fill="none"/>
                    `;
                case 'pendants':
                    return `
                        <path d="M130 80 Q150 70 170 80" stroke="${gradient}" stroke-width="6" fill="none"/>
                        <path d="M150 85 L150 130" stroke="${gradient}" stroke-width="4"/>
                        <polygon points="150,130 ${130 + variation * 5},${170 + variation * 5} ${170 - variation * 5},${170 + variation * 5}" fill="${gradient}"/>
                        <circle cx="150" cy="${150 + variation * 3}" r="${8 + variation}" fill="${accent}"/>
                    `;
                case 'bangles':
                    return `
                        <circle cx="150" cy="150" r="${60 + variation * 5}" stroke="${gradient}" stroke-width="20" fill="none"/>
                        <circle cx="150" cy="150" r="${40 + variation * 3}" stroke="${accent}" stroke-width="3" fill="none"/>
                        <circle cx="150" cy="${90 + variation * 5}" r="6" fill="${accent}"/>
                        <circle cx="${210 - variation * 5}" cy="150" r="6" fill="${accent}"/>
                        <circle cx="150" cy="${210 - variation * 5}" r="6" fill="${accent}"/>
                        <circle cx="${90 + variation * 5}" cy="150" r="6" fill="${accent}"/>
                    `;
                default:
                    return `
                        <circle cx="150" cy="150" r="${45 + variation * 5}" fill="${gradient}"/>
                        <circle cx="150" cy="150" r="${25 + variation * 3}" fill="${accent}"/>
                        <circle cx="150" cy="150" r="${15 + variation * 2}" fill="${gradient}"/>
                    `;
            }
        }

        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card rounded-xl shadow-lg overflow-hidden cursor-pointer fade-in';
            
            const metalRate = currentRates[product.category] || 0;
            const totalAmount = calculateTotal(product.weight, metalRate, product.makingCharges);
            
            card.innerHTML = `
                <div class="zoom-container">
                    <img src="${product.image}" alt="${product.name}" class="zoom-image w-full h-48 object-cover">
                </div>
                <div class="p-4">
                    <h3 class="font-semibold text-lg mb-2 truncate">${product.name}</h3>
                    <div class="space-y-1 text-sm text-gray-600 dark:text-gray-400">
                        <div class="flex justify-between">
                            <span>Design ID:</span>
                            <span class="font-mono text-${product.category === 'gold' ? 'yellow' : 'gray'}-600 font-bold">${product.designId}</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Weight:</span>
                            <span class="font-semibold">${product.weight}g</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Rate:</span>
                            <span class="font-semibold">â‚¹${metalRate}/g</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Making:</span>
                            <span class="font-semibold">â‚¹${product.makingCharges}</span>
                        </div>
                        <div class="flex justify-between font-bold text-green-600 text-base pt-2 border-t">
                            <span>Total:</span>
                            <span>â‚¹${totalAmount}</span>
                        </div>
                    </div>
                    <div class="flex space-x-2 mt-4">
                        <button onclick="event.stopPropagation(); addToCart(${JSON.stringify(product).replace(/"/g, '&quot;')})" 
                                class="flex-1 ${product.category === 'gold' ? 'btn-gold' : 'btn-silver'} text-white py-2 rounded-lg text-sm font-semibold transition-all">
                            <i class="fas fa-shopping-cart mr-1"></i>Cart
                        </button>
                        <button onclick="event.stopPropagation(); toggleWishlist(${JSON.stringify(product).replace(/"/g, '&quot;')})" 
                                class="px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                </div>
            `;
            
            card.onclick = () => showProductModal(product);
            return card;
        }

        function calculateTotal(weight, rate, makingCharges) {
            return Math.round((weight * rate) + makingCharges);
        }

        // Product Modal
        function showProductModal(product) {
            currentProduct = product;
            const metalRate = currentRates[product.category] || 0;
            const totalAmount = calculateTotal(product.weight, metalRate, product.makingCharges);
            
            document.getElementById('modalTitle').textContent = product.name;
            document.getElementById('modalImage').src = product.image;
            document.getElementById('modalDesignId').textContent = product.designId;
            document.getElementById('modalWeight').textContent = product.weight + 'g';
            document.getElementById('modalRate').textContent = `â‚¹${metalRate}/g`;
            document.getElementById('modalMaking').textContent = `â‚¹${product.makingCharges}`;
            document.getElementById('modalTotal').textContent = `â‚¹${totalAmount}`;
            
            document.getElementById('productModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('productModal').classList.add('hidden');
        }

        // Cart Management
        function addToCart(product) {
            const existingItem = cart.find(item => item.id === product.id);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            
            localStorage.setItem('varnika_cart', JSON.stringify(cart));
            updateCartCount();
            showNotification('Added to cart!', 'success');
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            localStorage.setItem('varnika_cart', JSON.stringify(cart));
            updateCartCount();
            renderCartItems();
        }

        function updateCartQuantity(productId, quantity) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity = Math.max(1, quantity);
                localStorage.setItem('varnika_cart', JSON.stringify(cart));
                renderCartItems();
            }
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        function showCart() {
            renderCartItems();
            document.getElementById('cartModal').classList.remove('hidden');
        }

        function closeCart() {
            document.getElementById('cartModal').classList.add('hidden');
        }

        function renderCartItems() {
            const container = document.getElementById('cartItems');
            const totalElement = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                container.innerHTML = '<div class="text-center py-8 text-gray-500">Your cart is empty</div>';
                totalElement.textContent = 'â‚¹0';
                return;
            }
            
            let total = 0;
            container.innerHTML = '';
            
            cart.forEach(item => {
                const metalRate = currentRates[item.category] || 0;
                const itemTotal = calculateTotal(item.weight, metalRate, item.makingCharges) * item.quantity;
                total += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg';
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded">
                    <div class="flex-1">
                        <h4 class="font-semibold">${item.name}</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400">â‚¹${calculateTotal(item.weight, metalRate, item.makingCharges)} each</p>
                        <p class="text-xs text-gray-500">ID: ${item.designId}</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button onclick="updateCartQuantity('${item.id}', ${item.quantity - 1})" class="w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors">-</button>
                        <span class="w-8 text-center font-semibold">${item.quantity}</span>
                        <button onclick="updateCartQuantity('${item.id}', ${item.quantity + 1})" class="w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors">+</button>
                    </div>
                    <div class="text-right">
                        <div class="font-semibold text-green-600">â‚¹${itemTotal}</div>
                        <button onclick="removeFromCart('${item.id}')" class="text-red-500 hover:text-red-700 text-sm transition-colors">Remove</button>
                    </div>
                `;
                container.appendChild(cartItem);
            });
            
            totalElement.textContent = `â‚¹${total}`;
        }

        // Wishlist Management
        function toggleWishlist(product) {
            const existingIndex = wishlist.findIndex(item => item.id === product.id);
            if (existingIndex > -1) {
                wishlist.splice(existingIndex, 1);
                showNotification('Removed from wishlist!', 'info');
            } else {
                wishlist.push(product);
                showNotification('Added to wishlist!', 'success');
            }
            
            localStorage.setItem('varnika_wishlist', JSON.stringify(wishlist));
            updateWishlistCount();
        }

        function updateWishlistCount() {
            document.getElementById('wishlistCount').textContent = wishlist.length;
        }

        function showWishlist() {
            renderWishlistItems();
            document.getElementById('wishlistModal').classList.remove('hidden');
        }

        function closeWishlist() {
            document.getElementById('wishlistModal').classList.add('hidden');
        }

        function renderWishlistItems() {
            const container = document.getElementById('wishlistItems');
            
            if (wishlist.length === 0) {
                container.innerHTML = '<div class="col-span-full text-center py-8 text-gray-500">Your wishlist is empty</div>';
                return;
            }
            
            container.innerHTML = '';
            wishlist.forEach(item => {
                const metalRate = currentRates[item.category] || 0;
                const totalAmount = calculateTotal(item.weight, metalRate, item.makingCharges);
                
                const wishlistItem = document.createElement('div');
                wishlistItem.className = 'product-card rounded-lg p-4';
                wishlistItem.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="w-full h-32 object-cover rounded mb-3">
                    <h4 class="font-semibold mb-2">${item.name}</h4>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">ID: ${item.designId}</p>
                    <p class="text-sm font-semibold text-green-600 mb-3">â‚¹${totalAmount}</p>
                    <div class="flex space-x-2">
                        <button onclick="addToCart(${JSON.stringify(item).replace(/"/g, '&quot;')})" class="flex-1 btn-gold text-white py-2 rounded text-sm font-semibold">
                            Add to Cart
                        </button>
                        <button onclick="toggleWishlist(${JSON.stringify(item).replace(/"/g, '&quot;')})" class="px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded transition-colors">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                container.appendChild(wishlistItem);
            });
        }

        // Checkout
        function checkout() {
            if (cart.length === 0) {
                showNotification('Your cart is empty!', 'error');
                return;
            }
            
            let message = "ðŸ›ï¸ *Order from Varnika Jewelers*\n\n";
            let total = 0;
            
            cart.forEach((item, index) => {
                const metalRate = currentRates[item.category] || 0;
                const itemTotal = calculateTotal(item.weight, metalRate, item.makingCharges) * item.quantity;
                total += itemTotal;
                
                message += `*${index + 1}. ${item.name}*\n`;
                message += `   ðŸ“‹ Design ID: ${item.designId}\n`;
                message += `   âš–ï¸ Weight: ${item.weight}g\n`;
                message += `   ðŸ’° ${item.category} Rate: â‚¹${metalRate}/g\n`;
                message += `   ðŸ”¨ Making Charges: â‚¹${item.makingCharges}\n`;
                message += `   ðŸ“¦ Quantity: ${item.quantity}\n`;
                message += `   ðŸ’µ Subtotal: â‚¹${itemTotal}\n\n`;
            });
            
            message += `*ðŸ’Ž Total Amount: â‚¹${total}*\n\n`;
            message += "Please confirm this order and provide delivery details. Thank you for choosing Varnika Jewelers! âœ¨";
            
            // Show checkout modal with multiple contact options
            showCheckoutModal(message, total);
        }

        // Show checkout modal with contact options
        function showCheckoutModal(orderMessage, total) {
            const modal = document.createElement('div');
            modal.className = 'modal fixed inset-0 z-50 flex items-center justify-center p-4';
            modal.innerHTML = `
                <div class="modal-content max-w-2xl w-full rounded-2xl shadow-2xl p-6 bg-white dark:bg-gray-800">
                    <div class="text-center mb-6">
                        <div class="text-6xl mb-4">ðŸ›ï¸</div>
                        <h2 class="font-playfair text-3xl font-bold text-contrast mb-2">Order Summary</h2>
                        <div class="text-2xl font-bold text-green-600">Total: â‚¹${total}</div>
                    </div>
                    
                    <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-4 mb-6">
                        <h3 class="font-semibold mb-2 text-contrast">Choose your preferred contact method:</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- WhatsApp App (Mobile) -->
                            <button onclick="openWhatsAppApp('${encodeURIComponent(orderMessage)}')" 
                                    class="flex items-center justify-center space-x-3 bg-green-500 hover:bg-green-600 text-white p-4 rounded-xl transition-all transform hover:scale-105">
                                <i class="fab fa-whatsapp text-2xl"></i>
                                <div class="text-left">
                                    <div class="font-semibold">WhatsApp App</div>
                                    <div class="text-sm opacity-90">Direct to app</div>
                                </div>
                            </button>
                            
                            <!-- Copy & Call -->
                            <button onclick="copyOrderAndCall('${encodeURIComponent(orderMessage)}')" 
                                    class="flex items-center justify-center space-x-3 bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-xl transition-all transform hover:scale-105">
                                <i class="fas fa-phone text-2xl"></i>
                                <div class="text-left">
                                    <div class="font-semibold">Copy & Call</div>
                                    <div class="text-sm opacity-90">+91 7464870444</div>
                                </div>
                            </button>
                            
                            <!-- SMS -->
                            <button onclick="sendSMS('${encodeURIComponent(orderMessage)}')" 
                                    class="flex items-center justify-center space-x-3 bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-xl transition-all transform hover:scale-105">
                                <i class="fas fa-sms text-2xl"></i>
                                <div class="text-left">
                                    <div class="font-semibold">Send SMS</div>
                                    <div class="text-sm opacity-90">Text message</div>
                                </div>
                            </button>
                            
                            <!-- Email -->
                            <button onclick="sendEmail('${encodeURIComponent(orderMessage)}')" 
                                    class="flex items-center justify-center space-x-3 bg-red-500 hover:bg-red-600 text-white p-4 rounded-xl transition-all transform hover:scale-105">
                                <i class="fas fa-envelope text-2xl"></i>
                                <div class="text-left">
                                    <div class="font-semibold">Send Email</div>
                                    <div class="text-sm opacity-90">Email order</div>
                                </div>
                            </button>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <button onclick="closeCheckoutModal()" 
                                class="px-6 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors">
                            Close
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            window.currentCheckoutModal = modal;
        }

        // WhatsApp App (works better on mobile)
        function openWhatsAppApp(encodedMessage) {
            const phoneNumber = '917464870444';
            const message = decodeURIComponent(encodedMessage);
            
            // Try WhatsApp app protocol first
            const whatsappUrl = `whatsapp://send?phone=${phoneNumber}&text=${encodedMessage}`;
            
            try {
                window.location.href = whatsappUrl;
                
                // Fallback after 2 seconds if app doesn't open
                setTimeout(() => {
                    copyOrderAndCall(encodedMessage);
                }, 2000);
                
            } catch (error) {
                console.error('WhatsApp app error:', error);
                copyOrderAndCall(encodedMessage);
            }
        }

        // Copy order details and show call option
        function copyOrderAndCall(encodedMessage) {
            const message = decodeURIComponent(encodedMessage);
            const phoneNumber = '+917464870444';
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(message).then(() => {
                    showNotification('Order details copied to clipboard!', 'success');
                    
                    // Show call confirmation
                    setTimeout(() => {
                        if (confirm(`Order details copied!\n\nWould you like to call ${phoneNumber} now?`)) {
                            window.location.href = `tel:${phoneNumber}`;
                        }
                    }, 500);
                });
            } else {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = message;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                showNotification('Order details copied to clipboard!', 'success');
                
                setTimeout(() => {
                    if (confirm(`Order details copied!\n\nWould you like to call ${phoneNumber} now?`)) {
                        window.location.href = `tel:${phoneNumber}`;
                    }
                }, 500);
            }
        }

        // Send SMS
        function sendSMS(encodedMessage) {
            const phoneNumber = '917464870444';
            const message = decodeURIComponent(encodedMessage);
            
            // Truncate message for SMS (SMS has character limits)
            const shortMessage = message.length > 160 ? 
                message.substring(0, 150) + "...\n\nFull details copied to clipboard!" : 
                message;
            
            const smsUrl = `sms:${phoneNumber}?body=${encodeURIComponent(shortMessage)}`;
            
            try {
                window.location.href = smsUrl;
                
                // Copy full message to clipboard
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(message);
                    showNotification('Full order details copied to clipboard!', 'info');
                }
            } catch (error) {
                console.error('SMS error:', error);
                copyOrderAndCall(encodedMessage);
            }
        }

        // Send Email
        function sendEmail(encodedMessage) {
            const message = decodeURIComponent(encodedMessage);
            const subject = 'Order from Varnika Jewelers Website';
            const email = 'varnikajewelers@gmail.com'; // Replace with actual email
            
            const emailUrl = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(message)}`;
            
            try {
                window.location.href = emailUrl;
            } catch (error) {
                console.error('Email error:', error);
                copyOrderAndCall(encodedMessage);
            }
        }

        // Close checkout modal
        function closeCheckoutModal() {
            if (window.currentCheckoutModal) {
                window.currentCheckoutModal.remove();
                window.currentCheckoutModal = null;
            }
        }

        // Smart Website Data Refresh - Only updates rates, not entire UI
        async function refreshWebsiteData() {
            console.log('Refreshing rates only...');
            
            // Fetch latest rates
            await fetchRates();
            
            // Update only the rates in existing product cards (no regeneration)
            const productsPage = document.getElementById('productsPage');
            if (productsPage && !productsPage.classList.contains('hidden')) {
                updateProductCardRates();
            }
            
            // Refresh cart items with updated rates
            if (cart.length > 0) {
                renderCartItems();
            }
            
            // Update admin panel current rates if visible
            const adminPanel = document.getElementById('adminPanel');
            if (adminPanel && !adminPanel.classList.contains('hidden')) {
                updateCurrentRateDisplays();
            }
        }

        // Update only the rates and totals in existing product cards
        function updateProductCardRates() {
            const productCards = document.querySelectorAll('#productsGrid .product-card');
            
            productCards.forEach(card => {
                // Extract product data from the card
                const designIdElement = card.querySelector('.font-mono');
                if (!designIdElement) return;
                
                const designId = designIdElement.textContent;
                const weightElement = card.querySelector('[class*="justify-between"]:nth-child(2) span:last-child');
                const rateElement = card.querySelector('[class*="justify-between"]:nth-child(3) span:last-child');
                const makingElement = card.querySelector('[class*="justify-between"]:nth-child(4) span:last-child');
                const totalElement = card.querySelector('.text-green-600 span:last-child');
                
                if (!weightElement || !rateElement || !makingElement || !totalElement) return;
                
                // Determine category from design ID
                const category = designId.toLowerCase().includes('g') ? 'gold' : 'silver';
                const weight = parseFloat(weightElement.textContent.replace('g', ''));
                const makingCharges = parseInt(makingElement.textContent.replace('â‚¹', ''));
                const metalRate = currentRates[category] || 0;
                
                // Update rate and total with smooth animation
                rateElement.style.transition = 'all 0.3s ease';
                totalElement.style.transition = 'all 0.3s ease';
                
                // Briefly highlight the changing values
                rateElement.style.backgroundColor = 'rgba(212, 175, 55, 0.2)';
                totalElement.style.backgroundColor = 'rgba(34, 197, 94, 0.2)';
                
                // Update the values
                rateElement.textContent = `â‚¹${metalRate}/g`;
                const newTotal = calculateTotal(weight, metalRate, makingCharges);
                totalElement.textContent = `â‚¹${newTotal}`;
                
                // Remove highlight after animation
                setTimeout(() => {
                    rateElement.style.backgroundColor = '';
                    totalElement.style.backgroundColor = '';
                }, 500);
            });
        }

        // Rate Fetching with Multiple Fallback Methods
        async function fetchRates() {
            try {
                document.getElementById('goldLoading').classList.remove('hidden');
                document.getElementById('silverLoading').classList.remove('hidden');
                
                let ratesLoaded = false;
                
                // Method 1: Try GitHub API
                try {
                    const response = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${branch}`, {
                        headers: {
                            'Authorization': `token ${token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'User-Agent': 'Varnika-Jewelers-App'
                        }
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        const content = atob(data.content);
                        const lines = content.split('\n');
                        
                        lines.forEach(line => {
                            if (line.startsWith('gold=')) {
                                const rate = parseFloat(line.split('=')[1]);
                                if (!isNaN(rate) && rate > 0) {
                                    currentRates.gold = rate;
                                    ratesLoaded = true;
                                }
                            }
                            if (line.startsWith('silver=')) {
                                const rate = parseFloat(line.split('=')[1]);
                                if (!isNaN(rate) && rate > 0) {
                                    currentRates.silver = rate;
                                    ratesLoaded = true;
                                }
                            }
                        });
                        
                        fileSha = data.sha;
                        console.log('Rates loaded from GitHub API:', currentRates);
                    }
                } catch (apiError) {
                    console.warn('GitHub API failed:', apiError.message);
                }
                
                // Method 2: Try raw file access if API failed
                if (!ratesLoaded) {
                    try {
                        const rawUrl = `https://raw.githubusercontent.com/${owner}/${repo}/${branch}/${path}`;
                        const rawResponse = await fetch(rawUrl);
                        
                        if (rawResponse.ok) {
                            const content = await rawResponse.text();
                            const lines = content.split('\n');
                            
                            lines.forEach(line => {
                                if (line.startsWith('gold=')) {
                                    const rate = parseFloat(line.split('=')[1]);
                                    if (!isNaN(rate) && rate > 0) {
                                        currentRates.gold = rate;
                                        ratesLoaded = true;
                                    }
                                }
                                if (line.startsWith('silver=')) {
                                    const rate = parseFloat(line.split('=')[1]);
                                    if (!isNaN(rate) && rate > 0) {
                                        currentRates.silver = rate;
                                        ratesLoaded = true;
                                    }
                                }
                            });
                            
                            console.log('Rates loaded from raw GitHub:', currentRates);
                        }
                    } catch (rawError) {
                        console.warn('Raw GitHub access failed:', rawError.message);
                    }
                }
                
                // Method 3: Use cached rates if available
                if (!ratesLoaded) {
                    const cachedRates = localStorage.getItem('varnika_cached_rates');
                    if (cachedRates) {
                        try {
                            const parsed = JSON.parse(cachedRates);
                            if (parsed.gold && parsed.silver && parsed.gold > 0 && parsed.silver > 0) {
                                currentRates = parsed;
                                ratesLoaded = true;
                                console.log('Using cached rates:', currentRates);
                            }
                        } catch (e) {
                            console.error('Error parsing cached rates:', e);
                        }
                    }
                }
                
                // Method 4: Use realistic default rates
                if (!ratesLoaded || currentRates.gold === 0 || currentRates.silver === 0) {
                    currentRates.gold = currentRates.gold || 6800;
                    currentRates.silver = currentRates.silver || 85;
                    console.log('Using default rates:', currentRates);
                }
                
                // Always update displays with current rates
                updateRateDisplays();
                
                // Update timestamp (never show offline)
                const timeString = new Date().toLocaleTimeString();
                document.getElementById('lastUpdated').textContent = timeString;
                const lastUpdatedMobile = document.getElementById('lastUpdatedMobile');
                if (lastUpdatedMobile) lastUpdatedMobile.textContent = timeString;
                
                // Update product prices if on products page
                if (!document.getElementById('productsPage').classList.contains('hidden')) {
                    updateProductCardRates();
                }
                
                console.log('Final rates:', currentRates);
                
            } catch (error) {
                console.error('All rate fetching methods failed:', error);
                
                // Ensure we have working rates even if everything fails
                if (currentRates.gold === 0) currentRates.gold = 6800;
                if (currentRates.silver === 0) currentRates.silver = 85;
                
                updateRateDisplays();
                
                const timeString = new Date().toLocaleTimeString();
                document.getElementById('lastUpdated').textContent = timeString;
                const lastUpdatedMobile = document.getElementById('lastUpdatedMobile');
                if (lastUpdatedMobile) lastUpdatedMobile.textContent = timeString;
                
            } finally {
                document.getElementById('goldLoading').classList.add('hidden');
                document.getElementById('silverLoading').classList.add('hidden');
                
                // Always cache current rates
                localStorage.setItem('varnika_cached_rates', JSON.stringify(currentRates));
            }
        }

        // Helper function to update all rate displays
        function updateRateDisplays() {
            document.getElementById('goldRate').textContent = `â‚¹${currentRates.gold}/g`;
            document.getElementById('silverRate').textContent = `â‚¹${currentRates.silver}/g`;
            
            const goldRateMobile = document.getElementById('goldRateMobile');
            const silverRateMobile = document.getElementById('silverRateMobile');
            
            if (goldRateMobile) goldRateMobile.textContent = `â‚¹${currentRates.gold}/g`;
            if (silverRateMobile) silverRateMobile.textContent = `â‚¹${currentRates.silver}/g`;
        }

        // Admin Functions
        function adminLogin() {
            const username = document.getElementById('adminUsername').value.trim();
            const password = document.getElementById('adminPassword').value.trim();
            
            if (username === 'varnika' && password === '4444') {
                isAdminLoggedIn = true;
                document.getElementById('adminLogin').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                
                // Populate current rates
                document.getElementById('adminGoldRate').value = currentRates.gold;
                document.getElementById('adminSilverRate').value = currentRates.silver;
                
                // Update current rate displays
                updateCurrentRateDisplays();
                
                showNotification('Admin login successful!', 'success');
            } else {
                showNotification('Invalid username or password!', 'error');
                document.getElementById('adminPassword').value = '';
            }
        }

        async function updateBothRates() {
            if (!isAdminLoggedIn) {
                showNotification('Please login first!', 'error');
                return;
            }
            
            const goldRate = parseFloat(document.getElementById('adminGoldRate').value);
            const silverRate = parseFloat(document.getElementById('adminSilverRate').value);
            
            if (!goldRate || !silverRate || goldRate <= 0 || silverRate <= 0 || isNaN(goldRate) || isNaN(silverRate)) {
                showNotification('Please enter valid numeric rates for both gold and silver!', 'error');
                return;
            }
            
            // Show loading state
            const updateBtn = event.target;
            const originalText = updateBtn.innerHTML;
            updateBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Updating Rates...';
            updateBtn.disabled = true;
            
            try {
                console.log('Starting rate update process...');
                console.log('New rates - Gold:', goldRate, 'Silver:', silverRate);
                
                // Step 1: Get current file SHA (required for GitHub API)
                let currentSha = null;
                let fileExists = false;
                
                try {
                    console.log('Fetching current file info...');
                    const getResponse = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${branch}`, {
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'User-Agent': 'Varnika-Jewelers-App',
                            'X-GitHub-Api-Version': '2022-11-28'
                        }
                    });
                    
                    if (getResponse.ok) {
                        const getData = await getResponse.json();
                        currentSha = getData.sha;
                        fileExists = true;
                        console.log('File exists, SHA:', currentSha);
                    } else if (getResponse.status === 404) {
                        console.log('File does not exist, will create new file');
                        fileExists = false;
                    } else {
                        throw new Error(`Failed to get file info: ${getResponse.status} ${getResponse.statusText}`);
                    }
                } catch (getError) {
                    console.error('Error getting file info:', getError);
                    throw getError;
                }
                
                // Step 2: Prepare content and request body
                const updatedContent = `gold=${goldRate}\nsilver=${silverRate}\nlast_updated=${new Date().toISOString()}`;
                const encodedContent = btoa(unescape(encodeURIComponent(updatedContent)));
                
                const requestBody = {
                    message: `Admin update: Gold â‚¹${goldRate}/g, Silver â‚¹${silverRate}/g - ${new Date().toLocaleString()}`,
                    content: encodedContent,
                    branch: branch
                };
                
                // Add SHA only if file exists
                if (fileExists && currentSha) {
                    requestBody.sha = currentSha;
                }
                
                console.log('Request body prepared:', requestBody);
                
                // Step 3: Update file on GitHub
                console.log('Sending update request to GitHub...');
                const updateResponse = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json',
                        'Accept': 'application/vnd.github.v3+json',
                        'User-Agent': 'Varnika-Jewelers-App',
                        'X-GitHub-Api-Version': '2022-11-28'
                    },
                    body: JSON.stringify(requestBody)
                });
                
                if (!updateResponse.ok) {
                    const errorText = await updateResponse.text();
                    console.error('GitHub API Error:', updateResponse.status, updateResponse.statusText, errorText);
                    throw new Error(`GitHub API failed: ${updateResponse.status} - ${errorText}`);
                }
                
                const updateData = await updateResponse.json();
                fileSha = updateData.content.sha;
                console.log('Successfully updated GitHub file, new SHA:', fileSha);
                
                // Step 4: Update local rates and displays
                currentRates.gold = goldRate;
                currentRates.silver = silverRate;
                
                // Update all displays
                updateRateDisplays();
                updateCurrentRateDisplays();
                
                // Update product cards if visible
                if (!document.getElementById('productsPage').classList.contains('hidden')) {
                    updateProductCardRates();
                }
                
                // Update cart items if any
                if (cart.length > 0) {
                    renderCartItems();
                }
                
                // Cache the new rates
                localStorage.setItem('varnika_cached_rates', JSON.stringify(currentRates));
                
                // Show success messages
                showAdminStatus('âœ… Rates updated and synced to server successfully!', 'success');
                showNotification('Rates updated successfully and synced to server!', 'success');
                
                console.log('Rate update completed successfully');
                
            } catch (error) {
                console.error('Rate update failed:', error);
                
                // Still update locally for immediate user experience
                currentRates.gold = goldRate;
                currentRates.silver = silverRate;
                updateRateDisplays();
                updateCurrentRateDisplays();
                localStorage.setItem('varnika_cached_rates', JSON.stringify(currentRates));
                
                // Show error but mention local update worked
                showAdminStatus(`âš ï¸ Server sync failed: ${error.message}. Rates updated locally.`, 'error');
                showNotification('Rates updated locally, but server sync failed. Please try again.', 'error');
                
            } finally {
                // Restore button state
                updateBtn.innerHTML = originalText;
                updateBtn.disabled = false;
            }
        }

        function resetRates() {
            document.getElementById('adminGoldRate').value = currentRates.gold;
            document.getElementById('adminSilverRate').value = currentRates.silver;
            showNotification('Rates reset to current values', 'info');
        }

        function refreshCurrentRates() {
            fetchRates();
            updateCurrentRateDisplays();
            showNotification('Current rates refreshed', 'info');
        }

        function updateCurrentRateDisplays() {
            document.getElementById('currentGoldDisplay').textContent = `â‚¹${currentRates.gold}/g`;
            document.getElementById('currentSilverDisplay').textContent = `â‚¹${currentRates.silver}/g`;
        }

        // Legacy function for backward compatibility
        async function updateRate(rateType) {
            return updateBothRates();
        }

        function showAdminStatus(message, type) {
            const status = document.getElementById('adminStatus');
            status.textContent = message;
            status.className = `mt-6 p-4 rounded-lg text-center ${type === 'success' ? 'bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100' : 'bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100'}`;
            status.classList.remove('hidden');
            
            setTimeout(() => {
                status.classList.add('hidden');
            }, 5000);
        }

        // Search Function
        function handleSearch(e) {
            const query = e.target.value.toLowerCase().trim();
            if (query.length < 2) return;
            
            // Simple search - show products page and filter
            showPage('products');
            
            // In a real implementation, you would filter products based on the query
            // For now, just show all products
            generateProducts();
        }

        // Notification System
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm ${
                type === 'success' ? 'bg-green-500 text-white' :
                type === 'error' ? 'bg-red-500 text-white' :
                'bg-blue-500 text-white'
            } fade-in`;
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 4000);
        }

        // Initialize rates display
        function initializeRateDisplays() {
            document.getElementById('goldRate').textContent = `â‚¹${currentRates.gold}/g`;
            document.getElementById('silverRate').textContent = `â‚¹${currentRates.silver}/g`;
            
            // Check if mobile elements exist before updating
            const goldRateMobile = document.getElementById('goldRateMobile');
            const silverRateMobile = document.getElementById('silverRateMobile');
            
            if (goldRateMobile) goldRateMobile.textContent = `â‚¹${currentRates.gold}/g`;
            if (silverRateMobile) silverRateMobile.textContent = `â‚¹${currentRates.silver}/g`;
        }
        
        // Initialize displays on load
        initializeRateDisplays();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9752067316a9a2ad',t:'MTc1NjE5NzYzNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
